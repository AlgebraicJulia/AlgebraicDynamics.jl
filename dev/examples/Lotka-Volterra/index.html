<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lotka-Volterra Three Ways · AlgebraicDynamics.jl</title><meta name="title" content="Lotka-Volterra Three Ways · AlgebraicDynamics.jl"/><meta property="og:title" content="Lotka-Volterra Three Ways · AlgebraicDynamics.jl"/><meta property="twitter:title" content="Lotka-Volterra Three Ways · AlgebraicDynamics.jl"/><meta name="description" content="Documentation for AlgebraicDynamics.jl."/><meta property="og:description" content="Documentation for AlgebraicDynamics.jl."/><meta property="twitter:description" content="Documentation for AlgebraicDynamics.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><script src="../../assets/analytics.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">AlgebraicDynamics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">AlgebraicDynamics.jl</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Lotka-Volterra Three Ways</a><ul class="internal"><li><a class="tocitem" href="#Undirected-composition"><span>Undirected composition</span></a></li><li><a class="tocitem" href="#Directed-composition"><span>Directed composition</span></a></li></ul></li><li><a class="tocitem" href="../Ecosystem/">Ecosystem Models</a></li><li><a class="tocitem" href="../CPG_examples/">Open Circular Port Graph Examples</a></li><li><a class="tocitem" href="../Cyber-Physical/">Cyber Physical Systems Example</a></li><li><a class="tocitem" href="../Ross-Macdonald/">Ross-Macdonald Malaria Modeling</a></li></ul></li><li><a class="tocitem" href="../../TLN/">Threshold Linear Networks</a></li><li><a class="tocitem" href="../../AlgebraicPetri/">AlgebraicPetri Integration</a></li><li><a class="tocitem" href="../../api/">Library Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Lotka-Volterra Three Ways</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lotka-Volterra Three Ways</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/AlgebraicJulia/AlgebraicDynamics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/AlgebraicJulia/AlgebraicDynamics.jl/blob/main/examples/Lotka-Volterra.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="lotka_volterra"><a class="docs-heading-anchor" href="#lotka_volterra">Lotka-Volterra Three Ways</a><a id="lotka_volterra-1"></a><a class="docs-heading-anchor-permalink" href="#lotka_volterra" title="Permalink"></a></h1><p><a href="https://nbviewer.jupyter.org/github/AlgebraicJulia/AlgebraicDynamics.jl/blob/gh-pages/dev/examples/Lotka-Volterra.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><p>We will give three examples of deriving the Lotka-Volterra equations $ \dot r(t) = \alpha r(t) - \beta r(t)f(t), \dot f(t) = \gamma f(t) r(t) - \delta f(t)$ as a composition of primitive systems. First, we will show it as the composition of resource sharers where the undirected composition pattern is an undirected wiring diagram. Second, we will show it as the composition of machines where the directed composition pattern is a wiring diagram. Lastly, we will show it as the composition of machines where the directed composition pattern is an open circular port graph (open CPG).</p><p>Although these examples are quite small and you can easily work them out by hand,  this approach is based on the solid mathematical theory of operad algebras that allows you to scale to larger and more complex problems.</p><h2 id="Undirected-composition"><a class="docs-heading-anchor" href="#Undirected-composition">Undirected composition</a><a id="Undirected-composition-1"></a><a class="docs-heading-anchor-permalink" href="#Undirected-composition" title="Permalink"></a></h2><h3 id="Undirected-wiring-diagrams"><a class="docs-heading-anchor" href="#Undirected-wiring-diagrams">Undirected wiring diagrams</a><a id="Undirected-wiring-diagrams-1"></a><a class="docs-heading-anchor-permalink" href="#Undirected-wiring-diagrams" title="Permalink"></a></h3><p>A standard Lotka-Volterra predator-prey model is the composition of three resource sharers:</p><ol><li>a model of rabbit growth: this resource sharer has dynamics <span>$\dot r(t) = \alpha r(t)$</span> and one port which exposes the rabbit population.</li><li>a model of rabbit/fox predation: this resource sharer has dynamics <span>$\dot r(t) = -\beta r(t) f(t), \dot f(t) = \gamma r(t)f(t)$</span> and two ports which expose the rabbit and fox populations respectively</li><li>a model of fox population decline: this resource sharer has dynamics <span>$\dot f(t) = -\delta f(t)$</span> and one port which exposes the fox population.</li></ol><p>However, there are not two independent rabbit populations –- one that grows and one that gets eaten by foxes. Likewise, there are not two independent fox populations –- one that declines and one that feasts on rabbits. To capture these interactions between the trio of resource sharers, we compose them by identifying the exposed rabbit populations and identifying the exposed fox populations.</p><pre><code class="language-julia hljs">using AlgebraicDynamics
using Catlab.WiringDiagrams, Catlab.Programs

using ComponentArrays
using OrdinaryDiffEq, Plots, Plots.PlotMeasures

const UWD = UndirectedWiringDiagram

# Define the primitive systems
dotr(u,p,t) = p.α*u
dotrf(u,p,t) = [-p.β*u[1]*u[2], p.γ*u[1]*u[2]]
dotf(u,p,t) = -p.δ*u

rabbit_growth = ContinuousResourceSharer{Float64}(1, dotr)
rabbitfox_predation = ContinuousResourceSharer{Float64}(2, dotrf)
fox_decline = ContinuousResourceSharer{Float64}(1, dotf)

# Define the composition pattern
rf = @relation (rabbits,foxes) begin
    growth(rabbits)
    predation(rabbits,foxes)
    decline(foxes)
end

# Compose
rabbitfox_system = oapply(rf, [rabbit_growth, rabbitfox_predation, fox_decline])


# Solve and plot
u0 = [10.0, 100.0]
params = ComponentArray(α=.3, β=0.015, γ=0.015, δ=0.7)
tspan = (0.0, 100.0)

prob = ODEProblem(rabbitfox_system, u0, tspan, params)
sol = solve(prob, Tsit5())

plot(sol, rabbitfox_system,
    lw=2, title = &quot;Lotka-Volterra Predator-Prey Model&quot;,
    xlabel = &quot;time&quot;, ylabel = &quot;population size&quot;
)</code></pre><img src="8142e9a7.svg" alt="Example block output"/><h2 id="Directed-composition"><a class="docs-heading-anchor" href="#Directed-composition">Directed composition</a><a id="Directed-composition-1"></a><a class="docs-heading-anchor-permalink" href="#Directed-composition" title="Permalink"></a></h2><p>A standard Lotka-Volterra predator-prey model is the composition of two machines:</p><ol><li><p>Evolution of a rabbit population: this machine has one input which represents a population of predators, <span>$h(t)$</span>, that hunt rabbits. This machine has one output which emits the rabbit population <span>$r(t)$</span>. The dynamics of this machine is the driven ODE <span>$\dot r(t) = \alpha r(t) - \beta r(t) h(t).$</span></p></li><li><p>Evoluation of a fox population: this machine has one input which represents a population of prey, <span>$e(t)$</span>, that are eaten by foxes. This machine has one output which emits the fox population <span>$f(t)$</span>. The dynamics of this machine is the driven ODE <span>$\dot f(t) =\gamma f(t)e(t) - \delta f(t).$</span></p></li></ol><h3 id="Wiring-diagrams"><a class="docs-heading-anchor" href="#Wiring-diagrams">Wiring diagrams</a><a id="Wiring-diagrams-1"></a><a class="docs-heading-anchor-permalink" href="#Wiring-diagrams" title="Permalink"></a></h3><p>Since foxes hunt rabbit, these machines compose by setting the fox population to be the input for rabbit evolution. Likewise, we set the rabbit population to be the input for fox evolution. We first implement this setting of inputs using a wiring diagram as our composition pattern.</p><pre><code class="language-julia hljs">using AlgebraicDynamics.DWDDynam

# Define the primitive systems
dotr(u, x, p, t) = [p.α*u[1] - p.β*u[1]*x[1]]
dotf(u, x, p, t) = [p.γ*u[1]*x[1] - p.δ*u[1]]

rabbit = ContinuousMachine{Float64}(1,1,1, dotr, (u, p, t) -&gt; u)
fox    = ContinuousMachine{Float64}(1,1,1, dotf, (u, p, t) -&gt; u)

# Define the composition pattern
rabbitfox_pattern = WiringDiagram([], [:rabbits, :foxes])
rabbit_box = add_box!(rabbitfox_pattern, Box(:rabbit, [:pop], [:pop]))
fox_box = add_box!(rabbitfox_pattern, Box(:fox, [:pop], [:pop]))

add_wires!(rabbitfox_pattern, Pair[
    (rabbit_box, 1) =&gt; (fox_box, 1),
    (fox_box, 1)    =&gt; (rabbit_box, 1),
    (rabbit_box, 1) =&gt; (output_id(rabbitfox_pattern), 1),
    (fox_box, 1)    =&gt; (output_id(rabbitfox_pattern), 2)
])

# Compose
rabbitfox_system = oapply(rabbitfox_pattern, [rabbit, fox])

# Solve and plot
u0 = [10.0, 100.0]
params = ComponentArray(α=.3, β=0.015, γ=0.015, δ=0.7)
tspan = (0.0, 100.0)

prob = ODEProblem(rabbitfox_system, u0, tspan, params)
sol = solve(prob, Tsit5())

plot(sol, rabbitfox_system, params,
    lw=2, title = &quot;Lotka-Volterra Predator-Prey Model&quot;,
    xlabel = &quot;time&quot;, ylabel = &quot;population size&quot;
)</code></pre><img src="19e9756d.svg" alt="Example block output"/><h3 id="Open-CPG"><a class="docs-heading-anchor" href="#Open-CPG">Open CPG</a><a id="Open-CPG-1"></a><a class="docs-heading-anchor-permalink" href="#Open-CPG" title="Permalink"></a></h3><p>We next implement the setting of inputs using an open CPG as our composition pattern. We will use a barbell CPG. A barbell has two boxes connected by <span>$n$</span> wires. In this instance we will set <span>$n$</span> to <span>$1$</span> since each machine receives and emits exactly one piece of information.</p><pre><code class="language-julia hljs">using AlgebraicDynamics.CPortGraphDynam
using AlgebraicDynamics.CPortGraphDynam: barbell

# Define the composition pattern
rabbitfox_pattern = barbell(1)

# Compose
rabbitfox_system = oapply(rabbitfox_pattern, [rabbit, fox])

u0 = [10.0, 100.0]
params = ComponentArray(α=.3, β=0.015, γ=0.015, δ=0.7)
tspan = (0.0, 100.0)

prob = ODEProblem(rabbitfox_system, u0, tspan, params)
sol = solve(prob, FRK65(0))

plot(sol, lw=2, bottom_margin=10mm, left_margin=10mm, title = &quot;Lotka-Volterra Predator-Prey Model&quot;, label=[&quot;rabbits&quot; &quot;foxes&quot;])
xlabel!(&quot;Time&quot;)
ylabel!(&quot;Population size&quot;)</code></pre><img src="86afe194.svg" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« AlgebraicDynamics.jl</a><a class="docs-footer-nextpage" href="../Ecosystem/">Ecosystem Models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 3 October 2024 19:15">Thursday 3 October 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
